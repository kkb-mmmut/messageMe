(this["webpackJsonpmessage-me"]=this["webpackJsonpmessage-me"]||[]).push([[0],{14:function(e,t,n){e.exports={loginSignupHeader:"login_loginSignupHeader__1DuA9",loginForm:"login_loginForm__3rze6",field:"login_field__2_KtX"}},17:function(e,t,n){e.exports={nav:"navbar_nav__3G_Tt",logo:"navbar_logo__1VOYM",logoIcons:"navbar_logoIcons__2Zixo",userDp:"navbar_userDp__2oCZc",logout:"navbar_logout__3IIbW",user:"navbar_user__15L9v",leftDiv:"navbar_leftDiv__3PCh2",rightNav:"navbar_rightNav__3idhn",navLinks:"navbar_navLinks__BhmE6",searchContainer:"navbar_searchContainer__1xT15",searchIcon:"navbar_searchIcon__XYjeS",searchResults:"navbar_searchResults__1BY66",searchResultsRow:"navbar_searchResultsRow__3Ks6i"}},3:function(e,t,n){e.exports={postWrapper:"home_postWrapper__3a7Tg",postHeader:"home_postHeader__1CFKa",postAvatar:"home_postAvatar__1SLni",postAuthor:"home_postAuthor__SDIWe",postTime:"home_postTime__3F0yU",postContent:"home_postContent__3C5w9",postActions:"home_postActions__1h75b",postLike:"home_postLike__aEsS5",postCommentsIcon:"home_postCommentsIcon__3aWAP",postCommentBox:"home_postCommentBox__ctffv",postCommentsList:"home_postCommentsList__sEq2r",postCommentItem:"home_postCommentItem__3S0c2",postCommentHeader:"home_postCommentHeader__3sS4g",postCommentAuthor:"home_postCommentAuthor__2pc3o",postCommentTime:"home_postCommentTime__3p1-y",postCommentLikes:"home_postCommentLikes__5kf5q",postCommentContent:"home_postCommentContent__1NQZl",commentLike:"home_commentLike__3QoFm",home:"home_home__3BJ9S","posts-list":"home_posts-list__3Io11",userName:"home_userName__1ncnP",friendsList:"home_friendsList__2tpK8",header:"home_header__hLYBd",friendsImg:"home_friendsImg__3-uWH",noFriends:"home_noFriends__3RnSj",friendsItem:"home_friendsItem__28IXb",friendsName:"home_friendsName__3G2HJ",postsList:"home_postsList__q1g1C",createPost:"home_createPost__3aEYJ",addPostBtn:"home_addPostBtn__3k4U7"}},5:function(e,t,n){e.exports={settings:"settings_settings__1bbhT",imgContainer:"settings_imgContainer__KN_wu",btnGrp:"settings_btnGrp__2gMMT",editBtn:"settings_editBtn__2pCmb",saveBtn:"settings_saveBtn__2Nwm-",goBack:"settings_goBack__P9EnA",field:"settings_field__1N4oN",fieldLabel:"settings_fieldLabel__2sSdT"}},51:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n.n(s),c=n(18),r=n.n(c),o=n(13),i=(n(51),n(10)),u=n(22),d=n(9),l=n(11),j=n(23),p=n(2),m=n.n(p),b=n(6),f=n(4),h=n(33),O=n(0),v={user:null,login:function(){},logout:function(){},loading:!0,signup:function(){},updateUser:function(){},updateUserFriends:function(){}},x=Object(s.createContext)(v),g=function(e){var t=e.children,n=$();return Object(O.jsx)(x.Provider,{value:n,children:t})},_={posts:[],loading:!0,addPostToState:function(){},addComment:function(){}},N=Object(s.createContext)(_),C=function(e){var t=e.children,n=te();return Object(O.jsx)(N.Provider,{value:n,children:t})},w="https://codeial.codingninjas.com:8000/api/v2/",k=function(){return"".concat(w,"/users/login")},S=function(){return"".concat(w,"/users/signup")},y=function(e,t){return"".concat(w,"/posts?page=").concat(e,"&limit=").concat(t)},L=function(){return"".concat(w,"/posts/create")},T=function(e){return"".concat(w,"/friendship/create_friendship?user_id=").concat(e)},P=function(){return"".concat(w,"/friendship/fetch_user_friends")},I=function(e){return"".concat(w,"/friendship/remove_friendship?user_id=").concat(e)},B=function(e,t){return"".concat(w,"/likes/toggle?likeable_id=").concat(e,"&likeable_type=").concat(t)},A=function(){return"".concat(w,"/comments")},E=function(){return"".concat(w,"/users/edit")},F=function(e){return"".concat(w,"/users/").concat(e)},D=function(e){return"".concat(w,"/users/search?text=").concat(e)},R="__codeial_token__",U=function(e,t){if(!e||!t)return console.error("Can not store in LS");var n="string"!==typeof t?JSON.stringify(t):t;localStorage.setItem(e,n)},H=function(e){var t=[];for(var n in e){var s=encodeURIComponent(n),a=encodeURIComponent(e[n]);t.push(s+"="+a)}return t.join("&")},G=["body"],M=function(){var e=Object(b.a)(m.a.mark((function e(t,n){var s,a,c,r,o,d,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.body,a=Object(u.a)(n,G),c=window.localStorage.getItem(R),r={"content-type":"application/x-www-form-urlencoded"},c&&(r.Authorization="Bearer ".concat(c)),o=Object(i.a)(Object(i.a)({},a),{},{headers:Object(i.a)(Object(i.a)({},r),a.headers)}),s&&(o.body=H(s)),e.prev=6,e.next=9,fetch(t,o);case 9:return d=e.sent,e.next=12,d.json();case 12:if(!(l=e.sent).success){e.next=15;break}return e.abrupt("return",{data:l.data,success:!0});case 15:throw new Error(l.message);case 18:return e.prev=18,e.t0=e.catch(6),console.error("error"),e.abrupt("return",{message:e.t0.message,success:!1});case 22:case"end":return e.stop()}}),e,null,[[6,18]])})));return function(t,n){return e.apply(this,arguments)}}(),W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return M(y(e,t),{method:"GET"})},q=function(e,t){return M(k(),{method:"POST",body:{email:e,password:t}})},J=function(){var e=Object(b.a)(m.a.mark((function e(t,n,s,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",M(S(),{method:"POST",body:{name:t,email:n,password:s,confirm_password:a}}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,s,a){return e.apply(this,arguments)}}(),K=function(){var e=Object(b.a)(m.a.mark((function e(t,n,s,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",M(E(),{method:"POST",body:{id:t,name:n,password:s,confirm_password:a}}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,s,a){return e.apply(this,arguments)}}(),V=function(e){return M(F(e),{method:"GET"})},Y=function(e){return M(T(e),{method:"POST"})},X=function(e){return M(I(e),{method:"POST"})},Z=function(){var e=Object(b.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",M(A(),{method:"POST",body:{post_id:n,content:t}}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),z=function(e){return M(D(e),{method:"GET"})},Q=function(){return Object(s.useContext)(x)},$=function(){var e=Object(s.useState)(null),t=Object(f.a)(e,2),n=t[0],a=t[1],c=Object(s.useState)(!0),r=Object(f.a)(c,2),o=r[0],u=r[1];Object(s.useEffect)((function(){(function(){var e=Object(b.a)(m.a.mark((function e(){var t,n,s,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=(r=R)?localStorage.getItem(r):console.error("Can get the value from LS"))){e.next=9;break}return n=Object(h.a)(t),e.next=5,M(P(),{method:"GET"});case 5:s=e.sent,c=[],s.success&&(c=s.data.friends),a(Object(i.a)(Object(i.a)({},n),{},{friends:c}));case 9:u(!1);case 10:case"end":return e.stop()}var r}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var d=function(){var e=Object(b.a)(m.a.mark((function e(t,n,s,c){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(t,n,s,c);case 2:if(r=e.sent,console.log("response",r),!r.success){e.next=10;break}return a(r.data.user),U(R,r.data.token?r.data.token:null),e.abrupt("return",{success:!0});case 10:return e.abrupt("return",{success:!1,message:r.message});case 11:case"end":return e.stop()}}),e)})));return function(t,n,s,a){return e.apply(this,arguments)}}();return{user:n,login:function(){var e=Object(b.a)(m.a.mark((function e(t,n){var s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(t,n);case 2:if(!(s=e.sent).success){e.next=9;break}return a(s.data.user),U(R,s.data.token?s.data.token:null),e.abrupt("return",{success:!0});case 9:return e.abrupt("return",{success:!1,message:s.message});case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),logout:function(){a(null),function(e){if(!e)return console.error("Can get the value from LS");localStorage.removeItem(e)}(R)},loading:o,signup:function(){var e=Object(b.a)(m.a.mark((function e(t,n,s,a){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(t,n,s,a);case 2:if(!(c=e.sent).success){e.next=7;break}return e.abrupt("return",{success:!0});case 7:return e.abrupt("return",{success:!1,message:c.message});case 8:case"end":return e.stop()}}),e)})));return function(t,n,s,a){return e.apply(this,arguments)}}(),updateUser:d,updateUserFriends:function(e,t){if(e)a(Object(i.a)(Object(i.a)({},n),{},{friends:[].concat(Object(j.a)(n.friends),[t])}));else{var s=n.friends.filter((function(e){return e.to_user._id!==t.to_user._id}));a(Object(i.a)(Object(i.a)({},n),{},{friends:s}))}}}},ee=function(){return Object(s.useContext)(N)},te=function(){var e=Object(s.useState)(null),t=Object(f.a)(e,2),n=t[0],a=t[1],c=Object(s.useState)(!0),r=Object(f.a)(c,2),o=r[0],u=r[1];Object(s.useEffect)((function(){(function(){var e=Object(b.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W();case 2:(t=e.sent).success&&a(t.data.posts),u(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);return{data:n,loading:o,addPostToState:function(e){var t=[e].concat(Object(j.a)(n));a(t)},addComment:function(e,t){var s=n.map((function(n){return n._id===t?Object(i.a)(Object(i.a)({},n),{},{comments:[].concat(Object(j.a)(n.comments),[e])}):n}));a(s)}}},ne=n(3),se=n.n(ne),ae=function(){var e=Q(),t=ee();return t.loading?Object(O.jsx)(he,{}):Object(O.jsxs)("div",{className:se.a.home,children:[Object(O.jsxs)("div",{className:se.a.postsList,children:[Object(O.jsx)(we,{}),t.data.map((function(e){return Object(O.jsx)(ke,{post:e},"post-".concat(e._id))}))]}),e.user&&Object(O.jsx)(Ne,{}),!e.user&&Object(O.jsx)(Ce,{})]})},ce=n(14),re=n.n(ce),oe=function(){var e=Object(s.useState)(""),t=Object(f.a)(e,2),n=t[0],a=t[1],c=Object(s.useState)(""),r=Object(f.a)(c,2),i=r[0],u=r[1],l=Object(s.useState)(!1),j=Object(f.a)(l,2),p=j[0],h=j[1],v=Object(o.useToasts)().addToast,x=Q(),g=function(){var e=Object(b.a)(m.a.mark((function e(t){var s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),h(!0),n&&i){e.next=4;break}return e.abrupt("return",v("Please enter both email and password",{appearance:"error"}));case 4:return e.next=6,x.login(n,i);case 6:(s=e.sent).success?v("Successfully logged in",{appearance:"success"}):v(s.message,{appearance:"error"}),h(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return x.user?Object(O.jsx)(d.a,{to:"/messageMe"}):Object(O.jsxs)("form",{className:re.a.loginForm,onSubmit:g,children:[Object(O.jsx)("span",{className:re.a.loginSignupHeader,children:"Log In"}),Object(O.jsx)("div",{className:re.a.field,children:Object(O.jsx)("input",{type:"email",placeholder:"Email",value:n,onChange:function(e){return a(e.target.value)}})}),Object(O.jsx)("div",{className:re.a.field,children:Object(O.jsx)("input",{type:"password",placeholder:"Paasword",value:i,onChange:function(e){return u(e.target.value)}})}),Object(O.jsx)("div",{className:re.a.field,children:Object(O.jsx)("button",{disabled:p,children:p?"Logging in...":"Log In"})})]})},ie=function(){var e=Object(s.useState)(""),t=Object(f.a)(e,2),n=t[0],a=t[1],c=Object(s.useState)(""),r=Object(f.a)(c,2),i=r[0],u=r[1],l=Object(s.useState)(""),j=Object(f.a)(l,2),p=j[0],h=j[1],v=Object(s.useState)(""),x=Object(f.a)(v,2),g=x[0],_=x[1],N=Object(s.useState)(""),C=Object(f.a)(N,2),w=C[0],k=C[1],S=Object(o.useToasts)().addToast,y=Q(),L=Object(d.g)(),T=function(){var e=Object(b.a)(m.a.mark((function e(t){var s,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),k(!0),s=!1,n&&i&&p&&g||(S("Please fill all the fields",{appearance:"error",autoDismiss:!0}),s=!0),p!==g&&(S("Make sure password and confirm password matches",{appearance:"error",autoDismiss:!0}),s=!0),!s){e.next=7;break}return e.abrupt("return",k(!1));case 7:return e.next=9,y.signup(n,i,p,g);case 9:if(!(a=e.sent).success){e.next=16;break}return L.push("/login"),k(!1),e.abrupt("return",S("User registered successfully, please login now",{appearance:"success",autoDismiss:!0}));case 16:S(a.message,{appearance:"error",autoDismiss:!0});case 17:k(!1);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return y.user?Object(O.jsx)(d.a,{to:"/messageMe"}):Object(O.jsxs)("form",{className:re.a.loginForm,onSubmit:T,children:[Object(O.jsx)("span",{className:re.a.loginSignupHeader,children:" Signup"}),Object(O.jsx)("div",{className:re.a.field,children:Object(O.jsx)("input",{placeholder:"Name",type:"text",required:!0,value:n,onChange:function(e){return a(e.target.value)},autoComplete:"new-password"})}),Object(O.jsx)("div",{className:re.a.field,children:Object(O.jsx)("input",{placeholder:"Email",type:"email",value:i,onChange:function(e){return u(e.target.value)},autoComplete:"new-password"})}),Object(O.jsx)("div",{className:re.a.field,children:Object(O.jsx)("input",{placeholder:"Confirm password",type:"password",required:!0,value:p,onChange:function(e){return h(e.target.value)}})}),Object(O.jsx)("div",{className:re.a.field,children:Object(O.jsx)("input",{placeholder:"Password",type:"password",required:!0,value:g,onChange:function(e){return _(e.target.value)}})}),Object(O.jsx)("div",{className:re.a.field,children:Object(O.jsx)("button",{disabled:w,children:w?"Signing up...":"Signup"})})]})},ue=n(5),de=n.n(ue),le=function(){var e,t,n,a=Q(),c=Object(s.useState)(!1),r=Object(f.a)(c,2),i=r[0],u=r[1],d=Object(s.useState)((null===(e=a.user)||void 0===e?void 0:e.name)?a.user.name:""),l=Object(f.a)(d,2),j=l[0],p=l[1],h=Object(s.useState)(""),v=Object(f.a)(h,2),x=v[0],g=v[1],_=Object(s.useState)(""),N=Object(f.a)(_,2),C=N[0],w=N[1],k=Object(s.useState)(!1),S=Object(f.a)(k,2),y=S[0],L=S[1],T=Object(o.useToasts)().addToast,P=function(){var e=Object(b.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L(!0),t=!1,j&&x&&C||(T("Please fill all the fields",{appearance:"error"}),t=!0),x!==C&&(T("Password and confirm password does not match",{appearance:"error"}),t=!0),!t){e.next=6;break}return e.abrupt("return",L(!1));case 6:return e.next=8,a.updateUser(a.user._id,j,x,C);case 8:if(n=e.sent,console.log("settings response",n),!n.success){e.next=17;break}return u(!1),L(!1),g(""),w(""),e.abrupt("return",T("User updated successfully",{appearance:"success"}));case 17:T(n.message,{appearance:"error"});case 18:L(!1);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:de.a.settings,children:[Object(O.jsx)("div",{className:de.a.imgContainer,children:Object(O.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/3135/3135715.png",alt:""})}),Object(O.jsxs)("div",{className:de.a.field,children:[Object(O.jsx)("div",{className:de.a.fieldLabel,children:"Email"}),Object(O.jsx)("div",{className:de.a.fieldValue,children:null===(t=a.user)||void 0===t?void 0:t.email})]}),Object(O.jsxs)("div",{className:de.a.field,children:[Object(O.jsx)("div",{className:de.a.fieldLabel,children:"Name"}),i?Object(O.jsx)("input",{type:"text",value:j,onChange:function(e){return p(e.target.value)}}):Object(O.jsx)("div",{className:de.a.fieldValue,children:null===(n=a.user)||void 0===n?void 0:n.name})]}),i&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:de.a.field,children:[Object(O.jsx)("div",{className:de.a.fieldLabel,children:"Password"}),Object(O.jsx)("input",{type:"password",value:x,onChange:function(e){return g(e.target.value)}})]}),Object(O.jsxs)("div",{className:de.a.field,children:[Object(O.jsx)("div",{className:de.a.fieldLabel,children:"Confirm Password"}),Object(O.jsx)("input",{type:"password",value:C,onChange:function(e){return w(e.target.value)}})]})]}),Object(O.jsx)("div",{className:de.a.btnGrp,children:i?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{className:"button ".concat(de.a.saveBtn),onClick:P,disabled:y,children:y?"Saving profile...":"Save profile"}),Object(O.jsx)("button",{className:"button ".concat(de.a.editBtn),onClick:function(){return u(!1)},children:"Go back"})]}):Object(O.jsx)("button",{className:"button ".concat(de.a.editBtn),onClick:function(){return u(!0)},children:"Edit Profile"})})]})},je=function(){var e=Object(s.useState)({}),t=Object(f.a)(e,2),n=t[0],a=t[1],c=Object(s.useState)(!0),r=Object(f.a)(c,2),i=r[0],u=r[1],l=Object(s.useState)(!1),j=Object(f.a)(l,2),p=j[0],h=j[1],v=Object(d.h)().userId,x=Object(o.useToasts)().addToast,g=Object(d.g)(),_=Q();if(Object(s.useEffect)((function(){(function(){var e=Object(b.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(v);case 2:if(!(t=e.sent).success){e.next=7;break}a(t.data.user),e.next=9;break;case 7:return x(t.message,{appearance:"error"}),e.abrupt("return",g.push("/messageMe"));case 9:u(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[v,g,x]),i)return Object(O.jsx)(he,{});var N=function(){var e=Object(b.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,X(v);case 3:(t=e.sent).success?(n=_.user.friends.filter((function(e){return e.to_user._id===v})),_.updateUserFriends(!1,n[0]),x("Friend removed successfully!",{appearance:"success"})):x(t.message,{appearance:"error"}),h(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(b.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,Y(v);case 3:(t=e.sent).success?(n=t.data.friendship,_.updateUserFriends(!0,n),x("Friend added successfully!",{appearance:"success"})):x(t.message,{appearance:"error"}),h(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:de.a.settings,children:[Object(O.jsx)("div",{className:de.a.imgContainer,children:Object(O.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/3135/3135715.png",alt:""})}),Object(O.jsxs)("div",{className:de.a.field,children:[Object(O.jsx)("div",{className:de.a.fieldLabel,children:"Email"}),Object(O.jsx)("div",{className:de.a.fieldValue,children:n.email})]}),Object(O.jsxs)("div",{className:de.a.field,children:[Object(O.jsx)("div",{className:de.a.fieldLabel,children:"Name"}),Object(O.jsx)("div",{className:de.a.fieldValue,children:n.name})]}),Object(O.jsx)("div",{className:de.a.btnGrp,children:-1!==_.user.friends.map((function(e){return e.to_user._id})).indexOf(v)?Object(O.jsx)("button",{className:"button ".concat(de.a.saveBtn),onClick:N,children:p?"Removing friend...":"Remove friend"}):Object(O.jsx)("button",{className:"button ".concat(de.a.saveBtn),onClick:C,disabled:p,children:p?"Adding friend...":"Add friend"})})]})},pe=["children"];function me(e){var t=e.children,n=Object(u.a)(e,pe),s=Q();return Object(O.jsx)(d.b,Object(i.a)(Object(i.a)({},n),{},{render:function(){return s.user?t:Object(O.jsx)(d.a,{to:"/login"})}}))}var be=function(){return Object(O.jsx)("h1",{children:"404"})};var fe=function(){var e=Q();return console.log("auth",e),e.loading?Object(O.jsx)(he,{}):Object(O.jsx)("div",{className:"App",children:Object(O.jsxs)(l.a,{children:[Object(O.jsx)(ge,{}),Object(O.jsxs)(d.d,{children:[Object(O.jsx)(d.b,{exact:!0,path:"/messageMe",children:Object(O.jsx)(ae,{})}),Object(O.jsx)(d.b,{exact:!0,path:"/login",children:Object(O.jsx)(oe,{})}),Object(O.jsx)(d.b,{exact:!0,path:"/register",children:Object(O.jsx)(ie,{})}),Object(O.jsx)(me,{exact:!0,path:"/settings",children:Object(O.jsx)(le,{})}),Object(O.jsx)(me,{exact:!0,path:"/user/:userId",children:Object(O.jsx)(je,{})}),Object(O.jsx)(d.b,{children:Object(O.jsx)(be,{})})]})]})})},he=function(){return Object(O.jsx)("div",{className:"app-spinner"})},Oe=n.p+"static/media/logo.84998ea0.png",ve=n(17),xe=n.n(ve),ge=function(){var e=Object(s.useState)([]),t=Object(f.a)(e,2),n=t[0],a=t[1],c=Object(s.useState)(""),r=Object(f.a)(c,2),o=r[0],i=r[1],u=Q();return Object(s.useEffect)((function(){var e=function(){var e=Object(b.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(o);case 2:(t=e.sent).success&&a(t.data.users);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();o.length>2?e():a([])}),[o]),Object(O.jsxs)("div",{className:xe.a.nav,children:[Object(O.jsx)("div",{className:xe.a.leftDiv,children:Object(O.jsx)(l.b,{to:"/messageMe",children:Object(O.jsx)("img",{alt:"",src:Oe})})}),Object(O.jsxs)("div",{className:xe.a.searchContainer,children:[Object(O.jsx)("img",{className:xe.a.searchIcon,src:"https://cdn-icons-png.flaticon.com/512/954/954591.png",alt:""}),Object(O.jsx)("input",{placeholder:"Search users",value:o,onChange:function(e){return i(e.target.value)}}),n.length>0&&Object(O.jsx)("div",{className:xe.a.searchResults,children:Object(O.jsx)("ul",{children:n.map((function(e){return Object(O.jsx)("li",{className:xe.a.searchResultsRow,children:Object(O.jsxs)(l.b,{to:"/user/".concat(e._id),children:[Object(O.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/3135/3135715.png",alt:""}),Object(O.jsx)("span",{children:e.name})]})},"user-".concat(e._id))}))})})]}),Object(O.jsxs)("div",{className:xe.a.rightNav,children:[u.user&&Object(O.jsxs)("div",{className:xe.a.user,children:[Object(O.jsx)(l.b,{to:"/settings",children:Object(O.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/3135/3135715.png",alt:"",className:xe.a.userDp})}),Object(O.jsx)("span",{children:u.user.name})]}),Object(O.jsx)("div",{className:xe.a.navLinks,children:Object(O.jsx)("ul",{children:u.user?Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/5509/5509597.png",alt:"",className:xe.a.logout,onClick:u.logout})}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("li",{children:Object(O.jsx)(l.b,{to:"/login",children:"Log in"})}),Object(O.jsx)("li",{children:Object(O.jsx)(l.b,{to:"/register",children:"Register"})})]})})})]})]})},_e=function(e){var t=e.comment;return Object(O.jsxs)("div",{className:se.a.postCommentsItem,children:[Object(O.jsxs)("div",{className:se.a.postCommentHeader,children:[Object(O.jsx)("span",{className:se.a.postCommentAuthor,children:t.user.name}),Object(O.jsx)("span",{className:se.a.postCommentTime,children:"a minute ago"}),Object(O.jsx)("span",{className:se.a.postCommentLikes,children:"22"})]}),Object(O.jsx)("div",{className:se.a.postCommentContent,children:t.content})]})},Ne=function(){var e=Q().user.friends,t=void 0===e?[]:e;return Object(O.jsxs)("div",{className:se.a.friendsList,children:[Object(O.jsx)("div",{className:se.a.header,children:"Friends"}),t&&0===t.length&&Object(O.jsx)("div",{className:se.a.noFriends,children:"NO friends found!"}),t&&t.map((function(e){return Object(O.jsx)("div",{children:Object(O.jsxs)(l.b,{className:se.a.friendsItem,to:"/user/".concat(e._id),children:[Object(O.jsx)("div",{className:se.a.friendsImg,children:Object(O.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/3135/3135715.png",alt:""})}),Object(O.jsx)("div",{className:se.a.friendsName,children:e.to_user.email})]})},"friend-".concat(e._id))}))]})},Ce=function(e){e.post;var t=ee();return Object(O.jsxs)("div",{className:se.a.friendsList,children:[Object(O.jsx)("div",{className:se.a.header,children:"Users @message-Me"}),t.data.map((function(e){return Object(O.jsx)("div",{className:se.a.friendsItem,children:Object(O.jsxs)("div",{className:se.a.friendsImg,children:[Object(O.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/3135/3135715.png",alt:"user-pic"})," ",Object(O.jsx)("span",{className:se.a.userName,children:e.user.name})]})})}))]})},we=function(){var e=Object(s.useState)(""),t=Object(f.a)(e,2),n=t[0],a=t[1],c=Object(s.useState)(!1),r=Object(f.a)(c,2),i=r[0],u=r[1],d=Object(o.useToasts)().addToast,l=ee(),j=function(){var e=Object(b.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,s=n,M(L(),{method:"POST",body:{content:s}});case 3:(t=e.sent).success?(a(""),l.addPostToState(t.data.post),d("Post created successfully",{appearance:"success"})):d(t.message,{appearance:"error"}),u(!1);case 6:case"end":return e.stop()}var s}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:se.a.createPost,children:[Object(O.jsx)("textarea",{className:se.a.addPost,value:n,onChange:function(e){return a(e.target.value)}}),Object(O.jsx)("div",{children:Object(O.jsx)("button",{className:se.a.addPostBtn,onClick:j,disabled:i,children:i?"Adding post...":"Add post"})})]})},ke=function(e){var t=e.post,n=Object(s.useState)(""),a=Object(f.a)(n,2),c=a[0],r=a[1],i=Object(s.useState)(!1),u=Object(f.a)(i,2),d=u[0],j=u[1],p=ee(),h=Object(o.useToasts)().addToast,v=function(){var e=Object(b.a)(m.a.mark((function e(n){var s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==n.key){e.next=7;break}return j(!0),e.next=4,Z(c,t._id);case 4:(s=e.sent).success?(r(""),p.addComment(s.data.comment,t._id),h("Comment created successfully!",{appearance:"success"})):h(s.message,{appearance:"error"}),j(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();console.log(d);var x=function(){var e=Object(b.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s=t._id,M(B(s,"Post"),{method:"POST"});case 2:(n=e.sent).success?n.data.deleted?h("Like removed successfully!",{appearance:"success"}):h("Like added successfully!",{appearance:"success"}):h(n.message,{appearance:"error"});case 4:case"end":return e.stop()}var s}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsx)("div",{className:se.a.postWrapper,children:Object(O.jsxs)("div",{className:se.a.postHeader,children:[Object(O.jsxs)("div",{className:se.a.postAvatar,children:[Object(O.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/3135/3135715.png",alt:"user-pic"}),Object(O.jsxs)("div",{children:[Object(O.jsx)(l.b,{to:{pathname:"/user/".concat(t.user._id),state:{user:t.user}},className:se.a.postAuthor,children:t.user.name}),Object(O.jsx)("span",{className:se.a.postTime,children:"a minute ago"})]})]}),Object(O.jsx)("div",{className:se.a.postContent,children:t.content}),Object(O.jsxs)("div",{className:se.a.postActions,children:[Object(O.jsxs)("div",{className:se.a.postLike,children:[Object(O.jsx)("button",{onClick:x,children:Object(O.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/456/456115.png",alt:"likes-icon"})}),Object(O.jsx)("span",{children:t.likes.length})]}),Object(O.jsxs)("div",{className:se.a.postCommentsIcon,children:[Object(O.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/2593/2593491.png",alt:"comments-icon"}),Object(O.jsx)("span",{children:t.comments.length})]})]}),Object(O.jsx)("div",{className:se.a.postCommentBox,children:Object(O.jsx)("input",{placeholder:"Start typing a comment",value:c,onChange:function(e){return r(e.target.value)},onKeyDown:v})}),Object(O.jsx)("div",{className:se.a.postCommentsList,children:t.comments.map((function(e){return Object(O.jsx)(_e,{comment:e},"post-comment-".concat(e._id))}))})]})},t._id)};r.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(o.ToastProvider,{autoDismiss:!0,autoDismissTimeout:5e3,placement:"top-left",children:Object(O.jsx)(g,{children:Object(O.jsx)(C,{children:Object(O.jsx)(fe,{})})})})}),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.d3d7718c.chunk.js.map